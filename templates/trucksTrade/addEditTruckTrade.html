<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="../js/layui/css/layui.css"/>
		<link rel="stylesheet" type="text/css" href="../css/addEditTruckTrade.css"/>
		<title>添加/编辑槽车租卖</title>
	</head>
	<body>
		<div class="truckTradeWrap layui-form">
			
			<div class="layui-form-item addEditItem">
				<input type="hidden" id="tradeTypeInp"/>
				<label class="layui-form-label"><span class="mustItem">*</span>贸易类型</label>
				<div class="layui-input-block">
					<input type="radio" value="1" name="tradeTypeName" title="租赁" lay-filter="tradeTypeFilter"/>
					<input type="radio" value="2" name="tradeTypeName" title="买卖" lay-filter="tradeTypeFilter"/>
				</div>		
			</div>
			
			<div class="layui-form-item addEditItem">
				<input type="hidden" id="compTypeInp">
				<label class="layui-form-label"><span class="mustItem">*</span>企业类型</label>
				<div class="layui-input-block">
					<input type="radio" value="1" name="compTypeName" title="个人" lay-filter="comTypeFilter"/>
					<input type="radio" value="2" name="compTypeName" title="公司" lay-filter="comTypeFilter"/>
				</div>		
			</div>
			<div class="layui-form-item addEditItem">
				<input type="hidden" id="truckTypeInp">
				<label class="layui-form-label"><span class="mustItem">*</span>货车类型</label>
				<div class="layui-input-block" id="truckTypeWrap">
					<p class="tipInfo">请先选择企业类型</p>
				</div>		
			</div>
			
			<div id="compNameWrap" class="layui-form-item addEditItem">
				<input type="hidden" id="compNameInp"/>
				<label class="layui-form-label"><span class="mustItem">*</span>公司名称</label>
				<div class="layui-input-block comInpItem">
					<select id="compNameSel" lay-filter="compNameSel">
						<option value="">请选择公司</option>
					</select>
				</div>
			</div>
			
			<div class="layui-form-item">
				<label class="layui-form-label"><span class="mustItem">*</span>车辆主图</label>
				<div class="layui-input-block">
					<a id="addImgBtn_main" title="添加车辆主图" class="addMainImgBtn" href="javascript:void(0)">
						<i class="iconfont icon-add"></i>
						<img id="thubImg_main"/>
					</a>
					<p class="tipsInfo">
						<i class="iconfont icon-gonggao"></i>
						<span>请上传车辆主图，建议图片宽高尺寸750*400</span>
					</p>
					<span class="viewMainBigImg">查看原图</span>
				</div>		
			</div>
			
			<div class="layui-form-item addEditItem">
				<input type="hidden" id="cardTitInp">
				<input type="hidden" id="cardWordsInp">
				<label class="layui-form-label"><span class="mustItem">*</span>车牌号码</label>
				<div class="layui-input-block">
					<div class="carNumSelWrap">
						<select id="cardTitSel" lay-filter="cardTitSel"></select>
					</div>
					<div class="carNumSelWrap">
						<select id="cardWordSel" lay-filter="cardWordSel"></select>
					</div>
					<div class="carNumInpWrap">
						<input id="cardNumInp" type="text" class="layui-input" placeholder="请输入车牌号码" maxlength="5" autocomplete="off" />
					</div>
				</div>		
			</div>
			
			<div class="layui-form-item addEditItem">
				<label class="layui-form-label"><span class="mustItem">*</span>车头上牌时间</label>
				<div class="layui-input-block comInpItem">
					<input id="truckHeadTimeInp" type="text" placeholder="请选择车头上牌时间" readonly class="layui-input"/>
				</div>		
			</div>
			
			<div class="layui-form-item addEditItem">
				<label class="layui-form-label">购置时间</label>
				<div class="layui-input-block comInpItem">
					<input id="truckBuyTime" type="text" placeholder="请选择车辆购置时间" readonly class="layui-input"/>
				</div>		
			</div>
			
			<div class="layui-form-item addEditItem">
				<input type="hidden" id="truckHeadTypeInp"/>
				<label class="layui-form-label"><span class="mustItem">*</span>车头类型</label>
				<div class="layui-input-block comInpItem">
					<select id="truckHeadTypeSel" lay-filter="truckHeadTypeSel">
						<option value="">请选择车头类型</option>
					</select>
				</div>
			</div>
			
			<div class="layui-form-item addEditItem">
				<input type="hidden" id="truckHeadBrandInp"/>
				<label class="layui-form-label"><span class="mustItem">*</span>车头品牌</label>
				<div class="layui-input-block comInpItem">
					<select id="truckHeadBrandSel" lay-filter="truckHeadBrandSel">
						<option value="">请选择车头品牌</option>
					</select>
				</div>
			</div>
			
			<!-- 危货下储罐品牌 容积以及上牌年月 -->
			<div class="dangerItemWrap">
				<div class="layui-form-item">
					<label class="layui-form-label"><span class="mustItem">*</span>储罐品牌</label>
					<input type="hidden" id="tankBandInp"/>
					<div class="layui-input-block comInpItem">
						<select id="tankBandSel" lay-filter="tankBandSel">
							<option value="">请选择储罐品牌</option>
						</select>
					</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label"><span class="mustItem">*</span>储罐容积</label>
					<div class="layui-input-block comInpItem">
						<input id="volumeInp" type="text" placeholder="请输入储罐容积(1-1000立方)" class="layui-input" autocomplete="off" maxlength="4"/>
					</div>
				</div>
				
				<div class="layui-form-item">
					<label class="layui-form-label"><span class="mustItem">*</span>储罐上牌日期</label>
					<div class="layui-input-block comInpItem">
						<input id="potYearInp" type="text" placeholder="请选择储罐上牌日期" class="layui-input" readonly/>
					</div>
				</div>
				
			</div>
			
			<div class="layui-form-item addEditItem">
				<label class="layui-form-label"><span class="mustItem">*</span>行驶里程</label>
				<div class="layui-input-block comInpItem">
					<input id="driveMileInp" type="text" placeholder="请输入车辆行驶里程(公里)" autocomplete="off" class="layui-input"/>
				</div>		
			</div>
			
			<div class="layui-form-item addEditItem">
				<input type="hidden" id="accidentInp">
				<label class="layui-form-label"><span class="mustItem">*</span>是否发生事故</label>
				<div class="layui-input-block">
					<input type="radio" name="accidentInpName" value="0" title="不公开" lay-filter="accidentFilter"/>
					<input type="radio" name="accidentInpName" value="1" title="是" lay-filter="accidentFilter"/>
					<input type="radio" name="accidentInpName" value="2" title="否" lay-filter="accidentFilter"/>
				</div>		
			</div>
			
			<div class="layui-form-item addEditItem">
				<label class="layui-form-label"><span class="mustItem">*</span>联系人</label>
				<div class="layui-input-block comInpItem">
					<input id="lxrNameInp" type="text" class="layui-input" placeholder="请输入联系人姓名" autocomplete="off" maxlength="10"/>
				</div>		
			</div>
			<div class="layui-form-item addEditItem">
				<label class="layui-form-label"><span class="mustItem">*</span>手机号码</label>
				<div class="layui-input-block comInpItem">
					<input id="lxrTel" type="text" class="layui-input" placeholder="请输入联系人手机号码" autocomplete="off" maxlength="11"/>
				</div>		
			</div>
			
			<!-- 运输范围贸易类型为租赁时存在 -->
			<div id="transformArea" class="layui-form-item transformArea">
				<label class="layui-form-label"><span class="mustItem">*</span>运输范围</label>
				<div class="layui-input-block comInpItem" id="provList"></div>
			</div>
			
			<div class="layui-form-item addEditItem">
				<input type="hidden" id="wxpfbzInp"/>
				<label class="layui-form-label"><span class="mustItem">*</span>尾气排放标准</label>
				<div class="layui-input-block comInpItem">
					<select id="wqpfbzSel" lay-filter="wqpfbzSel">
						<option value="">请选择尾气排放标准</option>
					</select>
				</div>
			</div>
			
			<div id="gasTypeWrap" class="layui-form-item addEditItem">
				<input type="hidden" id="gasTypeInp"/>
				<label class="layui-form-label"><span class="mustItem">*</span>气源类型</label>
				<div class="layui-input-block comInpItem">
					<select id="gasTypeSel" lay-filter="gasTypeSel">
						<option value="">请选择气源类型</option>
					</select>
				</div>
			</div>
			
			<!-- 货车类型为危货 -->
			<div class="dangerItemWrap layui-clear">
				<div class="dangerItem hasMargL">
					<p><span class="mustItem">*</span>车头行驶证</p>
					<div class="addImgWrap">
						<a id="addImgBtn_headXsz" title="添加车头行驶证" class="addImgBtn" href="javascript:void(0)">
							<i class="iconfont icon-add"></i>
							<img id="thubImg_headXsz"/>
						</a>
						<span id="viewBigImg_headXsz" class="viewBigImg">查看原图</span>
					</div>		
				</div>
				
				<div class="dangerItem">
					<p><span class="mustItem">*</span>罐车行驶证</p>
					<div class="addImgWrap">
						<a id="addImgBtn_gcXsz" title="添加罐车行驶证" class="addImgBtn" href="javascript:void(0)">
							<i class="iconfont icon-add"></i>
							<img id="thubImg_gcXsz"/>
						</a>
						<span id="viewBigImg_gcXsz" class="viewBigImg">查看原图</span>
					</div>		
				</div>
				
				<div class="dangerItem">
					<p><span class="mustItem">*</span>车辆运营证</p>
					<div class="addImgWrap">
						<a id="addImgBtn_yyz" title="添加车辆运营证" class="addImgBtn" href="javascript:void(0)">
							<i class="iconfont icon-add"></i>
							<img id="thubImg_yyz"/>
						</a>
						<span id="viewBigImg_yyz" class="viewBigImg">查看原图</span>
					</div>		
				</div>
				
				<div class="dangerItem">
					<p><span class="mustItem">*</span>储罐检验合格证</p>
					<div class="addImgWrap">
						<a id="addImgBtn_jyz" title="添加储罐检验合格证" class="addImgBtn" href="javascript:void(0)">
							<i class="iconfont icon-add"></i>
							<img id="thubImg_jyz"/>
						</a>
						<span id="viewBigImg_jyz" class="viewBigImg">查看原图</span>
					</div>		
				</div>
				
				<div class="dangerItem">
					<p><span class="mustItem">*</span>安全阀校验报告</p>
					<div class="addImgWrap">
						<a id="addImgBtn_aqf" title="添加安全阀校验报告" class="addImgBtn" href="javascript:void(0)">
							<i class="iconfont icon-add"></i>
							<img id="thubImg_aqf"/>
						</a>
						<span id="viewBigImg_aqf" class="viewBigImg">查看原图</span>
					</div>		
				</div>
			</div>
			
			<div class="layui-form-item addEditItem">
				<label class="layui-form-label">备注</label>
				<div class="layui-input-block comInpItem">
					<textarea id="remark" placeholder="请输入备注(200字以内)" maxlength="200" class="layui-textarea"></textarea>
				</div>		
			</div>
			
			
			
			<div class="layui-form-item comInpItem hasAlign">
				<button id="saveBtn" class="layui-btn">保存槽车租卖信息</button>
			</div>
			
			
			
			<script type="text/javascript" src="../js/jquery-1.8.3.min.js" charset="utf-8"></script>
			<script src="../js/layui/layui.js" type="text/javascript" charset="utf-8"></script>
			<script type="text/javascript">
				var cardTitle = ["京", "沪", "津", "渝", "冀", "豫", "云", "辽", "黑", "湘", "鲁", "新", "苏",  "浙", "赣", "鄂", "桂", "甘", "晋", "蒙", "陕", "吉", "闽", "贵", "粤", "川", "青", "藏", "琼", "宁"];
				var cardWords = ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
				var tmpProvNameArr = [];
				var mainImgSucc = '', headXszSucc = '',gcXszSucc = '',clyxzSucc = '',cgHgzSucc = '',aqfjySucc = '';
				var globalOpts = parent.globalOpts,isRightCardNum = false,isRightDriveMile = false,isRightVolume = false;
				layui.config({
					base: '/js/frame/js/'
				}).use(['layer','upload','form','laydate','basicInfo'],function(){
					var layer = layui.layer,form = layui.form,upload = layui.upload,laydate = layui.laydate,basicInfo=layui.basicInfo;
					laydate.render({'elem':'#truckHeadTimeInp',trigger: 'click'});
					laydate.render({'elem':'#truckBuyTime',trigger: 'click'});
					//贸易类型radio
					form.on('radio(tradeTypeFilter)',function(data){
						$('#tradeTypeInp').val(data.value);
						if(data.value == 1){//租赁时显示运输范围
							$('#transformArea').show();
							page.loadProvList();
						}else{
							$('#transformArea').hide();
						}
						tmpProvNameArr.length = 0;
						form.render();
					})
					//企业类型radio
					form.on('radio(comTypeFilter)',function(data){
						$('#compTypeInp').val(data.value);
						var strPuhuo = '<input type="radio" value="1" name="truckTypeName" title="普货" lay-filter="truckTypeFilter"/>';
						var strWeihuo = '<input type="radio" value="2" name="truckTypeName" title="危货" lay-filter="truckTypeFilter"/>';
						if(data.value == 1){//个人
							//货车类型只有普货 不显示储罐信息和气源类型
							$('#truckTypeWrap').html(strPuhuo);
							$('#compNameWrap').hide();
						}else{//公司
							//货车类型 普货和危货
							$('#truckTypeWrap').html(strPuhuo + strWeihuo);
							$('#compNameWrap').show();
							basicInfo.getCompanyList();
						}
						$('#truckTypeInp').val('');
						$('#compNameInp').val(''); 
						page.initCleanAllWhImgSrc();
						form.render();
					})
					//货车类型radio
					form.on('radio(truckTypeFilter)',function(data){
						$('#truckTypeInp').val(data.value);
						if(data.value == 1){//普货
							$('#gasTypeWrap').hide();
							$('.dangerItemWrap').hide();
						}else{//危货
							$('.dangerItemWrap').show();
							$('#gasTypeWrap').show();
							basicInfo.getGasType();
							basicInfo.getTankBrand();
							laydate.render({'elem':'#potYearInp',trigger: 'click'});
						}
						$('#gasTypeInp').val('');
						$('#tankBandInp').val('');
						$('#volumeInp').val('');
						$('#potYearInp').val('');
						page.initCleanAllWhImgSrc();
						form.render();
					})
					//车牌号码cartdTit 
					form.on('select(cardTitSel)',function(data){
						$('#cardTitInp').val(data.value);
					})
					//车牌号码cartdTit
					form.on('select(cardWordSel)',function(data){
						$('#cardWordsInp').val(data.value);
					})
					//是否发生事故
					form.on('radio(accidentFilter)',function(data){
						$('#accidentInp').val(data.value);
					})
					//运输范围checkbox
					form.on('checkbox(areaFilter)',function(data){
						var value = data.value;
						if(data.elem.checked){
							tmpProvNameArr.push(value);
						}else{
							for(var i=0;i<tmpProvNameArr.length;i++){
								if(value == tmpProvNameArr[i]){
									tmpProvNameArr.splice(i,1);
								}
							}
						}
					})
					var page = {
						init : function(){
							this.bindEvent();
							this.uploadMainImg();
							this.upWeihuoImg();
							this.renderCardNumWords();
							basicInfo.getWqpfbz();
							basicInfo.getTrucksHeadType();
							basicInfo.getTrucksHeadBrand();
						},
						uploadMainImg : function(){
							upload.render({
							    elem: '#addImgBtn_main'
							    ,url: '/upload/uploadSingle'
								,method : 'post'
							    ,accept : 'images'
								,auto: true
								,before: function(obj){
									layer.load();
							    }
							    ,done: function(res){
									layer.closeAll('loading');
								    $('#thubImg_main').show().attr('src','/temp/' + res.datas);
								    $('.viewMainBigImg').show();
								    mainImgSucc = res.datas;
							    }
							});
						},
						upWeihuoImg : function(){
							$('.addImgBtn').each(function(i){
								var id = $('.addImgBtn').eq(i).attr('id');
								var idBehind = $('.addImgBtn').eq(i).attr('id').split('_')[1];
								upload.render({
								    elem: '#'+id
								    ,url: '/upload/uploadSingle'
									,method : 'post'
								    ,accept : 'images'
									,auto: true
									,before: function(obj){
										layer.load();
								    }
								    ,done: function(res){
										layer.closeAll('loading');
									    $('#thubImg_' + idBehind).show().attr('src','/temp/' + res.datas);
										$('#viewBigImg_' + idBehind).show();
										if(idBehind == 'headXsz'){
											headXszSucc = res.datas;
										}else if(idBehind == 'gcXsz'){
											gcXszSucc = res.datas;
										}else if(idBehind == 'yyz'){
											clyxzSucc = res.datas;
										}else if(idBehind == 'jyz'){
											cgHgzSucc = res.datas;
										}else if(idBehind == 'aqf'){
											aqfjySucc = res.datas;
										}
										
								    }
								});
							});
						},
						initCleanAllWhImgSrc : function(){
							headXszSucc = '';gcXszSucc = '';clyxzSucc = '';cgHgzSucc = '';aqfjySucc = '';
							$('.addImgBtn').each(function(i){
								$('.addImgBtn').eq(i).find('img').attr('src','').hide();
								$('.viewBigImg').eq(i).hide();
								$('.addImgBtn').eq(i).find('i').show();
							});
						},
						viewOriginImg : function(succUrl){
							if(globalOpts == 'addBtn'){
								window.open('/temp/' + succUrl);
							}else{
								window.open('../' + succUrl);
							}
						},
						bindEvent : function(){
							var _this = this;
							$('.viewMainBigImg').on('click',function(){
								_this.viewOriginImg(mainImgSucc);
							});
							$('.viewBigImg').on('click',function(){
								var idBehind = $(this).attr('id').split('_')[1];
								if(idBehind == 'headXsz'){
									_this.viewOriginImg(headXszSucc);
								}else if(idBehind == 'gcXsz'){
									_this.viewOriginImg(gxXszSucc);
								}else if(idBehind == 'yyz'){
									_this.viewOriginImg(clyxzSucc);
								}else if(idBehind == 'jyz'){
									_this.viewOriginImg(cgHgzSucc);
								}else if(idBehind == 'aqf'){
									_this.viewOriginImg(aqfjySucc);
								}
							});
							$('#cardNumInp').blur(function(){
								var reg =  /^[0-9a-zA-Z]+$/;
								if($(this).val() != ''){
									if(!reg.test( $.trim($(this).val()) )){
										layer.msg('车牌号码应由数字和字母构成，不能含有其他特殊字符');
										isRightCardNum = false;
									}else if($(this).val().length != 5){
										layer.msg('车牌号码长度应是5位');
										isRightCardNum = false;
									}else{
										isRightCardNum = true;
										$(this).val( $(this).val().toUpperCase() );
									}
								}
							});
							$('#driveMileInp').on('blur',function(){
								var regNum = /^\+?[1-9]\d*$/;
								if($(this).val() != ''){
									if(!regNum.test( $.trim($(this).val()) )){
										layer.msg('行驶里程应是大于0的正整数');
										isRightDriveMile = false;
									}else{
										isRightDriveMile = true;
									}
								}
							});
							$('#volumeInp').on('blur',function(){
								var regNum = /^\+?[1-9]\d*$/;
								if($(this).val() != ''){
									if(!regNum.test( $.trim($(this).val()) )){
										layer.msg('储罐容积是大于0的正整数');
										isRightVolume = false;
									}else{
										isRightVolume = true;
									}
								}
							});
							$('#saveBtn').on('click',function(){
								var tradeTypeInp = $('#tradeTypeInp').val(),
									compTypeInp = $('#compTypeInp').val(),
									truckTypeInp = $('#truckTypeInp').val(),
									compNameInp = $('#compNameInp').val(),
									cardTitInp = $('#cardTitInp').val(),
									
									cardWordsInp = $('#cardWordsInp').val(),
									cardNumInp = $.trim($('#cardNumInp').val()),
									truckHeadTimeInp = $('#truckHeadTimeInp').val(),
									truckBuyTime = $('#truckBuyTime').val(),
									
									truckHeadTypeInp = $('#truckHeadTypeInp').val(),
									truckHeadBrandInp = $('#truckHeadBrandInp').val(),
									tankBandInp = $('#tankBandInp').val(),
									volumeInp = $.trim($('#volumeInp').val()),
									potYearInp = $('#potYearInp').val(),
									driveMileInp = $.trim($('#driveMileInp').val()),
									accidentInp = $('#accidentInp').val(),
									
									lxrNameInp = $.trim($('#lxrNameInp').val()),
									lxrTel = $.trim($('#lxrTel').val()),
									wxpfbzInp = $('#wxpfbzInp').val(),
									gasTypeInp = $('#gasTypeInp').val(),
									remark = $.trim($('#remark').val()),
									regPhone = /^1\d{10}$/;
									
								if(tradeTypeInp == ''){
									layer.msg('请选择贸易类型');
								}else if(compTypeInp == ''){
									layer.msg('请选择企业类型');
								}else if(truckTypeInp == ''){
									layer.msg('请选择货车类型');
								}else if(compTypeInp == 2 && compNameInp == ''){
									layer.msg('请选择公司');
								}else if(mainImgSucc == ''){
									layer.msg('请上传车辆主图');
								}else if(cardNumInp == ''){
									layer.msg('请输入车牌号码');
								}else if(isRightCardNum == false){
									layer.msg('车牌号码应由数字和字母构成，不能含有其他特殊字符');
								}else if(truckHeadTimeInp == ''){
									layer.msg('请选择车头上牌时间');
								}else if(truckBuyTime == ''){
									layer.msg('请选择车辆购置时间');
								}else if(truckHeadTypeInp == ''){
									layer.msg('请选择车头类型');
								}else if(truckHeadBrandInp == ''){
									layer.msg('请选择车头品牌');
								}else if(truckTypeInp == 2 && tankBandInp == ''){
									layer.msg('请选择储罐品牌');
								}else if(truckTypeInp == 2 && volumeInp == ''){
									layer.msg('请输入储罐容积');
								}else if(truckTypeInp == 2 && isRightVolume == false){
									layer.msg('储罐容积是大于0的正整数');
								}else if(truckTypeInp == 2 && potYearInp == ''){
									layer.msg('请选择储罐上牌日期');
								}else if(driveMileInp == ''){
									layer.msg('请输入行驶里程数(公里)');
								}else if(isRightDriveMile == false){
									layer.msg('行驶里程应是大于0的正整数');
								}else if(accidentInp == ''){
									layer.msg('请选择是否发生事故');
								}else if(lxrNameInp == ''){
									layer.msg('请输入联系人姓名');
								}else if(lxrTel == ''){
									layer.msg('请输入联系人手机号码');
								}else if(!regPhone.test(lxrTel) && lxrTel.length != 11){
									layer.msg('手机号码格式不对，请重新填写');
								}else if(tradeTypeInp == 1 && tmpProvNameArr.length == 0){//租赁
									layer.msg('请选择运输范围');
								}else if(tradeTypeInp == 1 && tmpProvNameArr.length > 5){
									layer.msg('运输范围最多只能选择5个地区');
								}else if(wxpfbzInp == ''){
									layer.msg('请选择尾气排放标准');
								}else if(truckTypeInp == 2 && gasTypeInp == ''){
									layer.msg('请选择气源类型');
								}else if(truckTypeInp == 2 && headXszSucc == ''){
									layer.msg('请上传车头行驶证');
								}else if(truckTypeInp == 2 && gcXszSucc == ''){
									layer.msg('请上传罐车行驶证');
								}else if(truckTypeInp == 2 && clyxzSucc == ''){
									layer.msg('请上传车辆运营证');
								}else if(truckTypeInp == 2 && cgHgzSucc == ''){
									layer.msg('请上传储罐检验合格证');
								}else if(truckTypeInp == 2 && aqfjySucc == ''){
									layer.msg('请上传安全阀校验报告');
								}else{
									var cardNum = cardTitInp + cardWordsInp + cardNumInp;
									var area = tmpProvNameArr.join(',');
									var url = '',type = '';
									var index= parent.layer.getFrameIndex(window.name);
									if(globalOpts == 'addBtn'){
										var field = {tradeType:tradeTypeInp,compId:compNameInp,trucksTypeId:truckTypeInp,mainImg:mainImgSucc,trucksNo:cardNum,
													spYear:truckHeadTimeInp,buyYear:truckBuyTime,headTypeId:truckHeadTypeInp,headPpId:truckHeadBrandInp,
													xsDistance:driveMileInp,wqpfbzId:wxpfbzInp,potPpId:tankBandInp,potVol:volumeInp,spYearPot:potYearInp,
													lxName:lxrNameInp,lxTel:lxrTel,area:area,qyTypeId:gasTypeInp,remark:remark,accidentFlag:accidentInp,
													tructsHeadxsz:headXszSucc,gcXsz:gcXszSucc,tructsYyz:clyxzSucc,potJyz:cgHgzSucc,aqfbg:aqfjySucc};
										url = '/trucksTrade/addTrucksTrade';
										type = 'post';
									}else if(globalOpts == 'editBtn'){
										var field = {};
										url = '/trucksTrade/updateTrucksTrade';
										type = 'put';
									}
									console.log(field)
									/*layer.load('1');
									$.ajax({
									    type:type,
										data : field,
									    dataType:"json",
									    url:url,
									    success:function (json){
									    	layer.closeAll('loading');
											if(json.code == 200){
												var title = globalOpts == 'addBtn' ? '添加槽车租卖信息成功' : '编辑槽车租卖信息成功';
												layer.msg(title,{icon:1,time:1200},function(){
													parent.addEditFlag = true;
													parent.layer.close(index);
												});
											}else if(json.code == 1000){
												layer.msg('服务器错误');
											}else if(json.code == 50001){
												layer.msg('当前槽车租卖信息不存在');
											}else if(json.code == 70001){
												layer.msg('抱歉，您暂无对槽车租卖添加或编辑的权限');
											}else if(json.code == 80001){
												layer.msg('当前槽车租卖信息审核已通过，暂不能修改');
											}
									    }
									});*/
								}
							});
						},
						renderCardNumWords : function(){
							var strNum = '',strWord = '';
							$('#cardTitInp').val(cardTitle[0]);
							$('#cardWordsInp').val(cardWords[0]);
							for(var i=0;i<cardTitle.length;i++){
								strNum += '<option value="'+ cardTitle[i] +'">'+ cardTitle[i] +'</option>';
							}
							for(var i=0;i<cardWords.length;i++){
								strWord += '<option value="'+ cardWords[i] +'">'+ cardWords[i] +'</option>';
							}
							$('#cardTitSel').html(strNum);
							$('#cardWordSel').html(strWord);
							form.render();
						},
						loadProvList : function(){
							var _this = this;
							$.ajax({
							    type:"get",
								data : { gsType:1 },
							    dataType:"json",
							    url:"/common/getProvinceList",
							    success:function (json){
							    	layer.closeAll('loading');
									console.log(json)
									if(json.code == 200){
										_this.renderProvHtml(json.datas);
									}else if(json.code == 1000){
										layer.msg('服务器错误');
									}else if(json.code == 50001){
										layer.msg('暂无省份，请添加');
									}
							    }
							});
						},
						renderProvHtml : function(list){
							var str = '';
							for(var i=0;i<list.length;i++){
								str += '<input type="checkbox" name="areaInp" lay-filter="areaFilter" title="'+ list[i].province +'" value="'+ list[i].province +'" lay-skin="primary">';
							}
							$('#provList').html(str);
							form.render();
						}
					};
					page.init();
					
				});
				
			</script>
		</div>
	</body>
</html>
