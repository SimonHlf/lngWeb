<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="../js/layui/css/layui.css"/>
		<link rel="stylesheet" type="text/css" href="../css/userManager.css"/>
		<title>用户管理</title>
	</head>
	<body style="background:#f2f2f2;">
		<div class="layui-fluid" style="margin-top:15px;">
			<div class="layui-row">
				<div class="layui-card">
					<div class="layui-card-header posRel">
						<span class="itemDivs">用户管理</span>
						<!-- 查询条件 -->
						<div class="layui-form" style="float: right;margin-top:2px;">
							<div style="width:180px;">
								<input type="hidden" id="roleInp" />
								<select id="roleSel" lay-filter="roleSel"></select>
							</div>
						</div>
					</div>
					<div class="layui-card-body">
						<div class="userList">
							<table id="userListTab" class="layui-table" lay-filter="userListTab"></table>
						</div>
						
					</div>
				</div>
			</div>
		</div>
		
		<script type="text/javascript" src="../js/jquery-1.8.3.min.js" charset="utf-8"></script>
		<script src="../js/layui/layui.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var uId = '';
			layui.config({
				base: '../js/frame/js/'
			}).extend({ //设定组件别名
			    common:  'common'// 表示模块文件的名字
			}).use(['form','common','table'],function(){
				var form = layui.form,common = layui.common,table=layui.table;
				var page = {
					init : function(){
						//获取角色列表
						common.getRoleList('','selLoad');
						this.loadUserList();
					},
					loadUserList : function(){
						var roleInp = $('#roleInp').val();
						var field = {uId:uId,roleId:roleInp};
						table.render({
							elem: '#userListTab',
							height: 'full-150',
							url : '/super/queryUser',
							method : 'get',
							parseData : function(res){
								return {
									"code" : 0,
									data : res.datas
								}
							},
							where:field,
							page : false,
							even : true,
							text: {none : '暂无相关数据'},
							cellMinWidth:200,
							cols : [
								[
									{field : '', title: '序号', type:'numbers', align:'center'},
									{field : 'account', title: '账号', align:'center'},
									{field : 'realName', title: '真实姓名', align:'center'},
									{field : 'roleName', title: '角色身份',align:'center'},
									{field : 'mobile', title: '联系方式',align:'center'},
									{field : 'lastLoginTime', title: '最后登录日期', align:'center'},
									{field : 'sex', title: '性别', align:'center'},
									{field : 'accountStatus', title: '账号状态', align:'center',templet:function(d){
										if(d.accountStatus == '1'){
											return '<span class="canUseAcc">有效</span>';
										}else if(d.accStatus == '0'){
											return '<span class="canNotUseAcc">无效</span>';
										}
									}}
								]
							],
							done : function(res, curr, count){
								console.log(res)
								layer.closeAll('loading');
							}
						});
					}
				};
				page.init();
			});
		</script>
	</body>
</html>
